<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<?rfc toc="yes" ?>
<?rfc sortrefs="yes" ?>
<?rfc symrefs="yes" ?>
<rfc category="info" ipr="trust200902" docName="draft-wilde-linkset-link-rel-00">
    <front>
        <title abbrev="Linkset Link Relation Type">A Link Relation Type for Link Sets</title>
        <author initials="E." surname="Wilde" fullname="Erik Wilde">
            <organization>CA Technologies</organization>
            <address>
                <email>erik.wilde@dret.net</email>
                <uri>http://dret.net/netdret/</uri>
            </address>
        </author>
        <author initials="H." surname="Van de Sompel" fullname="Herbert Van de Sompel">
            <organization>Los Alamos National Laboratory</organization>
            <address>
                <email>herbertv@lanl.gov</email>
                <uri>http://public.lanl.gov/herbertv/</uri>
            </address>
        </author>
        <date day="28" month="November" year="2016"/>
        <abstract>
            <t>This specification defines the "linkset" relation type that can be used 
                to link to a set of links.</t>
        </abstract>
        <note title="Note to Readers">
            <t>Please discuss this draft on the ART mailing list (<eref target="https://www.ietf.org/mailman/listinfo/art"/>).</t>
            <t>Online access to all versions and files is available on GitHub (<eref target="https://github.com/dret/I-D/tree/master/linkset-link-rel"/>).</t>
        </note>
    </front>
    <middle>
        <section title="Introduction" anchor="introduction">
            <t>RFC 5988 <xref target="RFC5988"/> specifies the HTTP "Link" header as a means to 
            convey typed links in HTTP responses. The links are provided as the payload of the "Link" header 
            using a syntax specified by the RFC. 
            Cases exist in which providing links by value is impractical or impossible. In these cases, 
            an approach to provide links by reference is desired. This specification defines the 
            "linkset" relation type that allows doing so.</t>
        </section>
        <section title="Terminology" anchor="terminology">
            <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <xref target="RFC2119"/>.</t>
        </section>
        <section title="Link Sets" anchor="linksets">
            <t>...</t>
        </section>
        <section title="Scenarios" anchor="scenarios">
            <t>...</t>
            <section title="Large Number of Links" anchor="link-volume">
                <t>Cases exist in which a significant number of links needs to be conveyed, 
                and, as a result, the payload of the HTTP "Link" header becomes large. It is possible to 
                statically configure a web server to correctly handle large HTTP response headers by 
                specifying an upper boundary for their size. But, when 
                the number of links and the amount of bytes required for each is unpredictable estimating 
                a reliable upper boundary is challenging. This is, for example, the case when links 
                are determined dynamically dependent on a range of contextual factors. 
                Applications take counter measures aimed at controlling the size of the HTTP "Link" header, 
                for example, by limiting the links they provide to those with select relation types, 
                thereby limiting the value of the HTTP "Link" header to clients. Providing links by reference, 
                instead of by value, overcomes challenges related to the unpredictable nature of the 
                extent of HTTP "Link" headers.
                </t>
            </section>
            <section title="Third-Party Links" anchor="third-party">
                <t>Cases exist in which a server other than the responding server is better placed to provide 
                links. That other server - the linking server - may be managed by the same custodian as the responding server 
                or by a third party trusted by the custodian of the responding server. In both cases, 
                the linking server exposes links pertaining to web resources made available by 
                the responding server. In order for the responding server to 
                provide up-to-date links in the HTTP "Link" header, it needs to obtain them 
                from the link server prior to responding to a client. 
                Doing so increases latency, which may be unnecessary if a client is not intent on 
                comsuming links. Providing links by reference, 
                instead of by value, removes this additional latency by avoiding server-to-server 
                communication required to obtain links.
                </t>
            </section>
        </section>
        <section title="Link Relation for Identifying Link Sets" anchor="linkset-link-relation">
            <t>The "linkset" relation type can be used to refer to a resource that provides 
            a set of links. Typically the Context IRI of these links  
            is the URI of the responding resource but other Context IRIs MAY be used. 
            </t>
            <t>
            More than one link with a "linkset" relation type MAY 
            be provided. Multiple such links can refer to the same set of links expressed using different 
            serializations or to different sets of links. 
            The use of a link with the "linkset" relation type does not preclude the 
            provision of links with other relation types. 
            </t>
            <t>The entity-body of a response from the Target IRI of a link with the 
                "linkset" relation type MAY be serialized in various ways, 
                but the link-value format serialization described here MUST be supported. 
                In this serialization, the entity-body MUST be formatted in the 
                same way as the value of an HTTP "Link" header, 
                and hence MUST comply to the "link-value" construction rule of Section 5 
                of RFC 5988 <xref target="RFC5988"/>, and the media type of the 
                entity-body MUST be "application/link-format" as introduced in RFC 6690 <xref target="RFC6690"/>. 
                The Context IRI of links contained in the entity-body MUST be interpreted as follows:
            </t>
            <t>
                <list>
                    <t>The Context IRI is the URI in the anchor parameter, when provided.</t>
                    <t>The Context IRI is the URI of the resource that conveyes the 
                        link with the "linkset" relation type, when the anchor parameter is not provided.</t>
                </list>
            </t>
            <t>For self-containdeness, the use of anchors for all links is RECOMMENDED.</t>
            <section title="Example" anchor="linkset-link-example">
                <t><xref target="Request1"></xref> shows a user agent issuing an 
                    HTTP head request against resource http://example.org/resource1.</t>
                <figure title="User Agent Issues HTTP HEAD on Resource" align="center" anchor="Request1">       
                    <artwork align="left">
<![CDATA[
HEAD /resource1 HTTP/1.1
Host: example.org
Connection: close
]]>
                    </artwork> 
                </figure>
                    <t><xref target="Response1"></xref> shows the response to the HEAD request of 
                    <xref target="Request1"></xref>. 
                    The response contains a "Link" header with 
                    a link that uses the "linkset" relation type. It indicates that links are provided 
                    by a linking server at 
                    resource http://example.com/links/http://example.org/resource.
                    </t>
                <figure title="Response to HTTP HEAD on Resource" align="center" anchor="Response1">       
                    <artwork align="left">
<![CDATA[
HTTP/1.1 200 OK
Date: Mon, 28 Nov 2016 14:37:51 GMT
Server: Apache-Coyote/1.1
Link: <http://example.com/links/http://example.org/resource1>
      ; rel="linkset"
      ; type="application/link-format"
Content-Length: 5214
Content-Type: text/html;charset=utf-8
Connection: close
]]>
                    </artwork> 
                </figure>
                <t><xref target="Request2"></xref> shows the user agent issuing an HTTP GET 
                    request against the Target IRI of the link with the "linkset" relation 
                    type shown in <xref target="Response1"></xref>. 
                </t>
                <figure title="User Agent Issues HTTP GET on Linking Server Resource" align="center" anchor="Request2">       
                    <artwork align="left">
<![CDATA[
GET /links/http://example.org/resource1 HTTP/1.1
Host: example.com
Accept: application/link-format
Connection: close
]]>
                    </artwork> 
                </figure>
                <t><xref target="Response2"></xref> shows response by the linking server 
                    to the HTTP GET request of <xref target="Request2"></xref>. 
                </t>
                <figure title="Response to HTTP GET on Linking Server Resource" align="center" anchor="Response2">       
                    <artwork align="left">
<![CDATA[
HTTP/1.1 200 OK
Date: Mon, 28 Nov 2016 14:40:02 GMT
Server: Apache-Coyote/1.1
Link: <http://example.org/resource1>
      ; rel="about"
Content-Length: 3018
Content-Type: application/link-format
Connection: close

 <http://authors.example.net/johndoe>
   ; rel="author"
   ; type="application/rdf+xml"
   ; anchor="<http://example.org/resource1>",
 <http://authors.example.net/janedoe>
   ; rel="author"
   ; type="application/rdf+xml"
   ; anchor="<http://example.org/resource1>",
 <http://example.org/resource1/items/AF48EF.pdf>
   ; rel="item"
   ; type="application/pdf"
   ; anchor="<http://example.org/resource1>",
 <http://example.org/resource1/items/CB63DA.html>
   ; rel="item"
   ; type="text/html"
   ; anchor="<http://example.org/resource1>",
 ...

]]>
                    </artwork> 
                </figure>
            </section>
        </section>
        <section title="IANA Considerations" anchor="iana-considerations">
            <t>The link relation type below has been registered by IANA per Section 6.2.1 of RFC 5988 <xref target="RFC5988"/>:</t>
            <section title="Link Relation Type: linkset">
                <t>
                    <list>
                        <t>Relation Name: linkset</t>
                        <t>Description: The Target IRI of a link with the "linkset" relation type 
                            provides a set of links.</t>
                        <t>Reference: [[ This document ]]</t>
                    </list>
                </t>
            </section>
        </section>
        <section title="Security Considerations" anchor="security-considerations">
            <t>...</t>
        </section>
        <!--
      <section title="Change Log" anchor="change-log">
         <t>Note to RFC Editor: Please remove this section before publication.</t>
         <section title="From -00 to -01">
            <t>
               <list style="symbols">
                  <t>...</t>
               </list>
            </t>
         </section>
      </section>
-->
    </middle>
    <back>
        <references title="Normative References">
            <reference anchor="RFC2119">
                <front>
                    <title abbrev="RFC Key Words">Key words for use in RFCs to Indicate Requirement Levels</title>
                    <author initials="S." surname="Bradner" fullname="Scott Bradner"/>
                    <date month="March" year="1997"/>
                </front>
                <seriesInfo name="RFC" value="2119"/>
            </reference>
            <reference anchor="RFC5988">
                <front>
                    <title>Web Linking</title>
                    <author initials="M." surname="Nottingham" fullname="Mark Nottingham"/>
                    <date month="October" year="2010"/>
                </front>
                <seriesInfo name="RFC" value="5988"/>
            </reference>
            <reference anchor="RFC6690">
                <front>
                    <title>Constrained RESTful Environments (CoRE) Link Format</title>
                    <author initials="Z." surname="Shelby" fullname="Zach Shelby"/>
                    <date month="August" year="2012"/>
                </front>
                <seriesInfo name="RFC" value="6690"/>
            </reference>
        </references>
        <!--
      <references title="Informative References">
      </references>
      <section title="Acknowledgements">
         <t>Thanks for comments and suggestions provided by ...</t>
      </section>
-->
    </back>
</rfc>
